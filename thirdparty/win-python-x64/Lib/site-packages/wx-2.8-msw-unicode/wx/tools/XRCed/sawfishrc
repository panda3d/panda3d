(require 'sawmill-defaults)

;;; Define two hooks to reset focus behavior while mapping test window

(define (xrced-match-window-before w)
  (setq prop (aref (get-x-text-property w 'WM_CLASS) 0))
  (cond ((equal prop "_XRCED_T_W")
	 (setq transients-get-focus-b transients-get-focus)
	 (setq transients-get-focus nil)
	 (setq focus-windows-when-mapped-b focus-windows-when-mapped)
	 (setq focus-windows-when-mapped nil)
	)
  )
)
(define (xrced-match-window-after w)
  (setq prop (aref (get-x-text-property w 'WM_CLASS) 0))
  (cond ((equal prop "_XRCED_T_W")
	 (setq transients-get-focus-b transients-get-focus-b)
	 (setq focus-windows-when-mapped focus-windows-when-mapped-b)
	)
  )
)
(add-hook 'map-notify-hook xrced-match-window-before)
(add-hook 'map-notify-hook xrced-match-window-after 't)
